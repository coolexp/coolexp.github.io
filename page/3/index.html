<!doctype html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="Sloppy's Blog">
<meta property="og:url" content="http://nikoer.com/page/3/index.html">
<meta property="og:site_name" content="Sloppy's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sloppy's Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://nikoer.com/page/3/"/>





  <title> Sloppy's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sloppy's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/09/22/AndroidJava调用C-，及C-调用Java/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/22/AndroidJava调用C-，及C-调用Java/" itemprop="url">
                  AndroidJava调用C++，及C++调用Java
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-22T12:41:19+08:00">
                2016-09-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>正常的Android开发过程中，难免会出现需要大量的计算，这时候，我们可能就会想到，需要提高计算的速度，这里可能想到利用c/C++,来提高运算速度，那我们这时候，就需要接触到这方面的相关知识了，下面我们作一下简单的实例测试，需要用的工具，包括Android SDK，NDK</p>
<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>首先我们创建一个简单的Android项目，然后在layout布局文件上，加一个简单的textview，取名ID为，labelTxt,设置字内容为HelloAndroid.在MainActivity里定义一个方法方法，同时添加载入SO文件的逻辑，内容如下 ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public native String  stringFromJNI();</div><div class="line">static&#123; </div><div class="line">	System.loadLibrary(&quot;jni-test&quot;); // 为什么叫jni-test,跟后面的MK文件内容配置</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在onCreate方法里添加如下内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">String str = &quot;Form Assets so:&quot;+stringFromJNI();</div><div class="line">TextView txt = (TextView)this.findViewById(R.id.labelTxt);</div><div class="line">if(txt!=null)&#123;</div><div class="line">	txt.setText(str);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Java调用C"><a href="#Java调用C" class="headerlink" title="Java调用C++"></a>Java调用C++</h2><p>这里，我自己手动编写CPP(com_nikoer_helloandroidapp_MainActivity.cpp)文件内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">#include &lt;jni.h&gt;</div><div class="line">#include &lt;android/log.h&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &quot;JniHelper.h&quot;</div><div class="line"></div><div class="line"></div><div class="line">#define  LOG_TAG    &quot;MAIN&quot;</div><div class="line">#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)</div><div class="line">#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)</div><div class="line"></div><div class="line"></div><div class="line">extern &quot;C&quot;</div><div class="line">&#123;</div><div class="line"></div><div class="line">	JNIEXPORT jstring JNICALL Java_com_nikoer_helloandroidapp_MainActivity_stringFromJNI(JNIEnv* env, jobject thiz)&#123;</div><div class="line"></div><div class="line">		std::string t=&quot;JNI Value&quot;;</div><div class="line">		return env-&gt;NewStringUTF(t.c_str());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	JNIEXPORT jint JNI_OnLoad(JavaVM *vm, void *reserved)</div><div class="line">	&#123;</div><div class="line">		LOGD(&quot;JNI_OnLoad&quot;);</div><div class="line">		return JNI_VERSION_1_4;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这里我用的的是C++编译，所以用到了extern “c”</p>
<p>在项目根目录下建一个jni目录，把CPP文件复制进去，在jni目录下编写Android.mk文件，跟Application.mk文件，<br>Android.mk:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">LOCAL_PATH := $(call my-dir)</div><div class="line"></div><div class="line">include $(CLEAR_VARS)</div><div class="line"></div><div class="line">LOCAL_LDLIBS := -landroid</div><div class="line">LOCAL_LDLIBS += -llog</div><div class="line"></div><div class="line">LOCAL_MODULE    := jni-test</div><div class="line">LOCAL_SRC_FILES := com_nikoer_helloandroidapp_MainActivity.cpp</div><div class="line"></div><div class="line">include $(BUILD_SHARED_LIBRARY)</div></pre></td></tr></table></figure></p>
<p>Application.mk:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">APP_STL := gnustl_static</div><div class="line"></div><div class="line">APP_CPPFLAGS := -frtti -DCC_ENABLE_CHIPMUNK_INTEGRATION=1 -std=c++11 -fsigned-char</div><div class="line">APP_LDFLAGS := -latomic</div><div class="line"></div><div class="line">APP_ABI := armeabi</div></pre></td></tr></table></figure></p>
<p>在jni目录下，运行命令行,输入:ndk-build   (当前前掉得设置ndk的环境变量，才可以运行ndk-build命令)，用eclipse刷新项目，运行目录。是不是发布HelloWorld变成了JNI Value.</p>
<h2 id="C-调用Java"><a href="#C-调用Java" class="headerlink" title="C++调用Java"></a>C++调用Java</h2><p>这里我们封闭一个类出来JniHelper,内容如下：<br>JniHelper.h<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">#pragma once</div><div class="line">#include &lt;jni.h&gt;</div><div class="line"></div><div class="line">typedef struct JniMethodInfo_</div><div class="line">&#123;</div><div class="line">    JNIEnv *    env;</div><div class="line">    jclass      classID;</div><div class="line">    jmethodID   methodID;</div><div class="line">&#125; JniMethodInfo;</div><div class="line">class JniHelper&#123;</div><div class="line">public:</div><div class="line">	static void setJavaVM(JavaVM *vm);</div><div class="line">	static JNIEnv* getEnv();</div><div class="line">	static bool getStaticMethodInfo(JniMethodInfo &amp;methodinfo, const char *className, const char *methodName,const char *paramCode);</div><div class="line">private:</div><div class="line">	static JavaVM *pvm;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>JniHelper.cpp<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">#include &quot;JniHelper.h&quot;</div><div class="line">#include &lt;android/log.h&gt;</div><div class="line"></div><div class="line"></div><div class="line">#define  LOG_TAG    &quot;JniHelper&quot;</div><div class="line">#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG,LOG_TAG,__VA_ARGS__)</div><div class="line">#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR,LOG_TAG,__VA_ARGS__)</div><div class="line"></div><div class="line">JavaVM* JniHelper::pvm=nullptr;</div><div class="line"></div><div class="line">void JniHelper::setJavaVM(JavaVM *vm)&#123;</div><div class="line">	pvm = vm;</div><div class="line">&#125;</div><div class="line"></div><div class="line">JNIEnv* JniHelper::getEnv()&#123;</div><div class="line">	JNIEnv*  env=nullptr;</div><div class="line">    pvm-&gt;GetEnv((void**)&amp;env,JNI_VERSION_1_4);</div><div class="line">    return env;</div><div class="line">&#125;</div><div class="line"></div><div class="line"> bool JniHelper::getStaticMethodInfo(JniMethodInfo &amp;methodinfo, const char *className,const char *methodName, const char *paramCode) &#123;</div><div class="line">    if ((nullptr == className) ||</div><div class="line">        (nullptr == methodName) ||</div><div class="line">        (nullptr == paramCode)) &#123;</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    JNIEnv *env = JniHelper::getEnv();</div><div class="line">    if (!env) &#123;</div><div class="line">        LOGE(&quot;Failed to get JNIEnv&quot;);</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">        </div><div class="line">    jclass classID = env-&gt;FindClass(className);</div><div class="line">    if (! classID) &#123;</div><div class="line">        LOGE(&quot;Failed to find class %s&quot;, className);</div><div class="line">        env-&gt;ExceptionClear();</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    jmethodID methodID = env-&gt;GetStaticMethodID(classID, methodName, paramCode);</div><div class="line">    if (! methodID) &#123;</div><div class="line">        LOGE(&quot;Failed to find static method id of %s&quot;, methodName);</div><div class="line">        env-&gt;ExceptionClear();</div><div class="line">        return false;</div><div class="line">    &#125;</div><div class="line">        </div><div class="line">    methodinfo.classID = classID;</div><div class="line">    methodinfo.env = env;</div><div class="line">    methodinfo.methodID = methodID;</div><div class="line">    return true;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>修改入口文件com_nikoer_helloandroidapp_MainActivity.cpp:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">extern &quot;C&quot;</div><div class="line">&#123;</div><div class="line"></div><div class="line">	JNIEXPORT jstring JNICALL Java_com_nikoer_helloandroidapp_MainActivity_stringFromJNI(JNIEnv* env, jobject thiz)&#123;</div><div class="line"></div><div class="line">		std::string t=&quot;JNI Value&quot;;</div><div class="line"></div><div class="line">		// 开始由C++ 调用Java</div><div class="line">		JniMethodInfo minfo;</div><div class="line">		bool result = JniHelper::getStaticMethodInfo(minfo,&quot;com/nikoer/helloandroidapp/MainActivity&quot;,&quot;getTime&quot;,&quot;()Ljava/lang/String;&quot;);</div><div class="line">		if(result)&#123;</div><div class="line">			jstring jstr = (jstring)minfo.env-&gt;CallStaticObjectMethod(minfo.classID, minfo.methodID);</div><div class="line">			t = &quot;JNI:&quot;+std::string((char*)env-&gt;GetStringUTFChars(jstr, 0));</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		return env-&gt;NewStringUTF(t.c_str());</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	JNIEXPORT jint JNI_OnLoad(JavaVM *vm, void *reserved)</div><div class="line">	&#123;</div><div class="line">		LOGD(&quot;JNI_OnLoad&quot;);</div><div class="line">		JniHelper::setJavaVM(vm);</div><div class="line">		return JNI_VERSION_1_4;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>修改Android.mk:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">LOCAL_PATH := $(call my-dir)</div><div class="line"></div><div class="line">include $(CLEAR_VARS)</div><div class="line"></div><div class="line">LOCAL_LDLIBS := -landroid</div><div class="line">LOCAL_LDLIBS += -llog</div><div class="line"></div><div class="line">LOCAL_MODULE    := jni-test</div><div class="line">LOCAL_SRC_FILES := com_nikoer_helloandroidapp_MainActivity.cpp \</div><div class="line">				   JniHelper.cpp</div><div class="line"></div><div class="line">include $(BUILD_SHARED_LIBRARY)</div></pre></td></tr></table></figure></p>
<p>修改JavaActivity,添加如下方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public static String getTime() &#123;</div><div class="line">	return String.valueOf(System.currentTimeMillis());</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行:ndk-build,再用Eclipse刷新项目，运行项目，是不是变成时间字符串了</p>
<p>源文件参考：<a href="http://www.nikoer.com/data/jni.zip" target="_blank" rel="external">下载</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/09/18/Ruby利用xcodeproj实现IOS项目的自动生成/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/18/Ruby利用xcodeproj实现IOS项目的自动生成/" itemprop="url">
                  利用xcodeproj实现IOS项目的自动生成
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-18T17:46:39+08:00">
                2016-09-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>做Cocos2d-x的游戏开发者都知道，大部分开发团队都是Windows VS开发项目(壕团队除外)，我们在编译Android项目时，都需要重新生成jni/Android.mk文件，由于该文件是一个简单的文本文件，我们可以随便通过任何脚本，譬如Python，在每次编译前根据模板MK文件生成Android.mk文件，很方便，然后在自动化编译IOS项目时，我们就有点麻烦了，每次都需要重新配置下xcodeproj的项目文件，然后最后发布可能还需要发布证书。之前问了许多朋友都是由某个程序员进行发布前的手动添加，太麻烦，而且不智能，容易出错。那有没有象Android一样的方法呢？答案肯定是有了。经过一番摸索，由于之前没有接触过Ruby，而比较成熟的就是CocoaPods的xcodeproj开发项目，该项目是ruby开发。</p>
<h2 id="进行"><a href="#进行" class="headerlink" title="进行"></a>进行</h2><p>下面进行一系统软件的安装：</p>
<ul>
<li>安装ruby<br><a href="https://www.ruby-lang.org/" target="_blank" rel="external">https://www.ruby-lang.org/</a> 当然mac还可以brew install ruby这样安装</li>
<li>安装xcodeproj(可能需要sudo)<br>gem install xcodeproj</li>
<li>由于用到ini配置文件，安装inifile<br>gem install inifile</li>
</ul>
<h2 id="代码尝试"><a href="#代码尝试" class="headerlink" title="代码尝试"></a>代码尝试</h2><p>关键代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">project = Xcodeproj::Project.open($PROJECT_PATH)</div><div class="line">project.targets.each do |target|</div><div class="line">  if target.name==$TARGET_NAME</div><div class="line">      group = project.main_group</div><div class="line">      group.set_source_tree(&apos;SOURCE_ROOT&apos;)</div><div class="line">      #get_file_list(CLASS_PATH)</div><div class="line">      generateSubGroup(target,group,$CLASS_PATH,&quot;#&#123;$SOURCE_FOLDER_NAME&#125;&quot;,&quot;../#&#123;$SOURCE_FOLDER_NAME&#125;/&quot;)</div><div class="line">      #sdkGroup = group.find_subpath(File.join(&apos;sdk&apos;,&apos;ios&apos;), true)</div><div class="line">      #file_ref = sdkGroup.new_reference(&quot;../Classes/sdk/SDK.cpp&quot;)</div><div class="line">      #file_ref = sdkGroup.new_reference(&quot;../Classes/sdk/SDK.hpp&quot;)</div><div class="line">      #target.add_file_references([file_ref]) </div><div class="line">  end</div><div class="line">end</div><div class="line">project.save()</div></pre></td></tr></table></figure></p>
<p>代码参考：<a href="http://www.nikoer.com/data/xcodeproj.zip" target="_blank" rel="external">点击下载</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/09/06/c可变参数使用/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/06/c可变参数使用/" itemprop="url">
                  c可变参数使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-06T13:59:09+08:00">
                2016-09-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在C语言编程中有时会遇到一些参数个数可变的函数，例如printf(),scanf()函数，其函数原型为：<br>int printf(const char<em> format,…)，int scanf(const char </em>format,…);<br>它除了有一个参数format固定以外，后面跟着的参数的个数和类型是可变的(用三个点“…”做参数占位符)，实际调用时可以有以下的形式: printf(“%d”,i);  printf(“%d,%c”,i,j);</p>
<p>下面可以自己实现一个可变参数的实例:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">void HelloWorld::testParam(int mode, ...) &#123;</div><div class="line">	va_list ap;</div><div class="line">	va_start(ap, mode);</div><div class="line">	int arg;</div><div class="line">	while(true)&#123;</div><div class="line">		arg = va_arg(ap, int);</div><div class="line">		if (arg == -1)</div><div class="line">			break;</div><div class="line">		CCLOG(&quot;mode:%d&quot;, arg);</div><div class="line">	&#125;</div><div class="line">	va_end(ap);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/08/29/回顾一些二进制算法/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/29/回顾一些二进制算法/" itemprop="url">
                  回顾一些二进制算法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-29T13:50:17+08:00">
                2016-08-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="amp-按位与"><a href="#amp-按位与" class="headerlink" title="&amp;按位与"></a>&amp;按位与</h2><p>按位与运算 按位与运算符”&amp;”是双目运算符。其功能是参与运算的两数各对应的二进位相与。只有对应的两个二进位均为1时，结果位才为1 ，否则为0。参与运算的数以补码方式出现。<br>例如：9&amp;5可写算式如下： 00001001 (9的二进制补码)&amp;00000101 (5的二进制补码) 00000001 (1的二进制补码)可见9&amp;5=1。<br>按位与运算通常用来对某些位清0或保留某些位。例如把a 的高八位清 0 ， 保留低八位， 可作 a&amp;255 运算 ( 255 的二进制数为<br>0000000011111111)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">int main()&#123; </div><div class="line">	int a=9,b=5,c; </div><div class="line">	c=a&amp;b; </div><div class="line">	printf(&quot;a=%dnb=%dnc=%dn&quot;,a,b,c); </div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>算法举例，求一个十六制的RGB颜色值：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">int c = 0xFFFFFF;</div><div class="line">int r = c &gt;&gt; 16;</div><div class="line">int g = c &gt;&gt; 8 &amp; 0xFF</div><div class="line">int b = c &amp; 0xFF;</div></pre></td></tr></table></figure></p>
<h2 id="按位或"><a href="#按位或" class="headerlink" title="|按位或"></a>|按位或</h2><p>按位或运算 按位或运算符“|”是双目运算符。其功能是参与运算的两数各对应的二进位相或。只要对应的二个二进位有一个为1时，结果位就为1。参与运算的两个数均以补码出现。<br>例如：9|5可写算式如下： 00001001|00000101<br>00001101 (十进制为13)可见9|5=13<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">int main()&#123; </div><div class="line">	int a=9,b=5,c; </div><div class="line">	c=a|b; </div><div class="line">	printf(&quot;a=%dnb=%dnc=%dn&quot;,a,b,c);</div><div class="line">	return 0; </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>算法举例：已经RGB的值，求十六进制的RGB值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">int r = 255;</div><div class="line">int g = 255;</div><div class="line">int b = 255;</div><div class="line">int c = r &lt;&lt; 16 | g &lt;&lt; 8 | b;</div></pre></td></tr></table></figure></p>
<h2 id="按位异或"><a href="#按位异或" class="headerlink" title="^ 按位异或"></a>^ 按位异或</h2><p>按位异或运算 按位异或运算符“^”是双目运算符。其功能是参与运算的两数各对应的二进位相异或，当两对应的二进位相异时，结果为1。参与运算数仍以补码出现，例如9^5可写成算式如下： 00001001^00000101 00001100 (十进制为12)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">int main()&#123; </div><div class="line">	int a=9; </div><div class="line">	a=a^15; </div><div class="line">	printf(&quot;a=%dn&quot;,a);</div><div class="line">	return 0; </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>算法举例：不产生临时变量，交换两个变量的值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">int a = 1;</div><div class="line">int b = 2;</div><div class="line">a = a^b;</div><div class="line">b = b^a;</div><div class="line">a = a^b;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/08/22/CPP中的构造与析造/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/22/CPP中的构造与析造/" itemprop="url">
                  C++的构造与Copy构造
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-22T14:21:26+08:00">
                2016-08-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在C++中，自定义类，在把类的一个实体赋值给另外一个同类型的变量对象是，系统会自动完成构造函数的，即使我们没有提供默认的构造函数，因为系统会自动产生一个构造函数。譬如如下的定义与使用：</p>
<pre>
struct TestData
{
    int age;
    TestData(int g) {
        age = g;
    }
    // 系统产生的默认构造函数跟这个是一样的
    TestData(TestData &c) {
        // 注释掉这个试试，下面的输出会产生一个奇怪的输出
        age = c.age;
    }
    TestData(const TestData &c) {
        age = c.age;
    }
    ~TestData() {

    }
};
</pre>

<p>使用：<br>TestData aa(99);<br>TestData bb = aa;<br>CCLOG(“TestData:%d”,bb.age);</p>
<p>上面的定义Copy构造函数，跟不定义都没有关系。但是如果类内有通过在堆上产生的数据，在析构函数体内是需要delete的，此时如果用赋值的方法，给另外一对象，因为在堆上生成的内存，此时只有一份内存，如果产生两次析构。会使程序产生异常的。因此，我们此时需要自定义Copy构造函数了。</p>
<pre>
struct TestData
{
    Node* node;
    TestData(int g) {
        age = g;
        node = new Node();
    }
    // 系统产生的默认构造函数跟这个是一样的
    TestData(TestData &c) {
        age = c.age;
        //node = c.node;
        node = new Node();
    }
    ~TestData() {
        delete = node;
    }
};
</pre>

<p>,还是如上的测试方法。如果你把自定义的copy构造函数注释掉试试。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/08/19/cocos2d-x如果让c-执行js回调/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/19/cocos2d-x如果让c-执行js回调/" itemprop="url">
                  cocos2d-x如果让c++执行js回调
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-19T13:28:26+08:00">
                2016-08-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>此文章接:<a href="http://nikoer.com/2016/07/13/Cocos2d-x%E7%94%9F%E6%88%90JS%E7%BB%91%E5%AE%9A/">点击查看绑定C++给JS调用</a> 这篇文章而来.</p>
<p>Cocos2d-x JS项目中JS调用C++，相对比较简单，在前一篇文章也做了说明。主要是绑定C++给JS调用。相对简单，那昨天看到论坛里好多朋友一直在讨论C++调用JS的问题，好象都有一些奇怪的问题，今天做了一个测试DEMO。下面分几点来看一下。</p>
<h3 id="改造之前的C-类（Eraylayer）"><a href="#改造之前的C-类（Eraylayer）" class="headerlink" title="改造之前的C++类（Eraylayer）"></a>改造之前的C++类（Eraylayer）</h3><p>新增一个Delegate类，为ErayLayer添加设置Delegate类，ErayLayer头文件如下：</p>
<pre>
class ErayDelegate:public cocos2d::Ref {
public:
    virtual void onClick(const std::string& value) {};
    virtual ~ErayDelegate() {};
};

class ErayLayer :public cocos2d::Layer {
public:
    ErayLayer();
    ~ErayLayer();
    virtual bool init();
    CREATE_FUNC(ErayLayer);
    void setDelegate(ErayDelegate* _delegate);
private:
    ErayDelegate* m_pDelegate;
};
</pre>

<p>CPP文件如下：</p>
<pre>
ErayLayer::ErayLayer() {
    m_pDelegate = nullptr;
}
ErayLayer::~ErayLayer() {
    CC_SAFE_RELEASE(m_pDelegate);
}
bool ErayLayer::init() {
    if (!Layer::init()) {
        return false;
    }
    ImageView* image = ImageView::create();
    image->loadTexture("res/diamond3.png");
    image->setTouchEnabled(true);
    image->addTouchEventListener([=](Ref *pSender, ui::Widget::TouchEventType type) {
        if (type != ui::Widget::TouchEventType::ENDED)
            return;
        if (m_pDelegate) {
            m_pDelegate->onClick("call from cpp");
        }
        CCLOG("click on Image");
    });
    image->setPosition(Vec2(300.0f, 300.0f));
    addChild(image);
    return true;
}
/**
* @brief 设置代理执行类
*/
void ErayLayer::setDelegate(ErayDelegate* _delegate) {
    if (_delegate) {
        m_pDelegate = _delegate;
        m_pDelegate->retain();
    }
}
</pre>

<h3 id="新增jsb-coolexp-manual-hpp-jsb-coolexp-manual-cpp-主要代码如下："><a href="#新增jsb-coolexp-manual-hpp-jsb-coolexp-manual-cpp-主要代码如下：" class="headerlink" title="新增jsb_coolexp_manual.hpp,jsb_coolexp_manual.cpp,主要代码如下："></a>新增jsb_coolexp_manual.hpp,jsb_coolexp_manual.cpp,主要代码如下：</h3><p>〈pre&gt;<br>class JSB_ErayDelegate :public ErayDelegate {<br>public:<br>    JSB_ErayDelegate() {</p>
<pre><code>}
virtual void onClick(const std::string&amp; value) override {
    // 执行代理的方法
    JSContext *cx = ScriptingCore::getInstance()-&gt;getGlobalContext();
    jsval arg = std_string_to_jsval(cx, value);
    JS::RootedValue delegateVal(cx, _JSDelegate);
    ScriptingCore::getInstance()-&gt;executeFunctionWithOwner(delegateVal, &quot;onClick&quot;, 1, &amp;arg);

    // 调用一个全部的对象的方法
    JSContext * context = ScriptingCore::getInstance()-&gt;getGlobalContext();
    JS::RootedObject object(context, ScriptingCore::getInstance()-&gt;getGlobalObject());
    JS::RootedValue owner(context);
    jsval arg1 = INT_TO_JSVAL(1001);

    JS_GetProperty(context, object, &quot;Config&quot;, &amp;owner);
    ScriptingCore::getInstance()-&gt;executeFunctionWithOwner(owner, &quot;sendNumber&quot;, 1, &amp;arg1);
}
void setJSDelegate(JS::HandleValue pJSDelegate)
{
    _JSDelegate = pJSDelegate;
}
</code></pre><p>private:<br>    JS::Heap<js::value> _JSDelegate;<br>};<br>static bool jsb_ErayLayer_setJSHandler(JSContext <em>cx, uint32_t argc, jsval </em>vp) {<br>    JS::CallArgs args = JS::CallArgsFromVp(argc, vp);<br>    JS::RootedObject obj(cx, args.thisv().toObjectOrNull());<br>    js_proxy_t <em>proxy = jsb_get_js_proxy(obj);<br>    ErayLayer</em> cobj = (ErayLayer <em>)(proxy ? proxy-&gt;ptr : NULL);<br>    JSB_PRECONDITION2(cobj, cx, false, “Invalid Native Object”);<br>    if (argc == 1)<br>    {<br>        // save the delegate<br>        JSB_ErayDelegate</em> nativeDelegate = new (std::nothrow) JSB_ErayDelegate();<br>        nativeDelegate-&gt;setJSDelegate(args.get(0));<br>        cobj-&gt;setDelegate(nativeDelegate);<br>        args.rval().setUndefined();<br>        nativeDelegate-&gt;release();<br>        return true;<br>    }<br>    JS_ReportError(cx, “wrong number of arguments: %d, was expecting %d”, argc, 1);<br>    return false;<br>}</js::value></p>
<p>extern JSObject <em>jsb_ErayLayer_prototype;<br>void register_all_coolexp_manual(JSContext</em> cx, JS::HandleObject global)<br>{<br>    JS::RootedObject proto(cx, jsb_ErayLayer_prototype);<br>    JS_DefineFunction(cx, proto, “setJSDelegate”, jsb_ErayLayer_setJSHandler, 1, JSPROP_ENUMERATE | JSPROP_PERMANENT);<br>}</p>
<p></p>
<h3 id="JS文件内容："><a href="#JS文件内容：" class="headerlink" title="JS文件内容："></a>JS文件内容：</h3><pre>
var erayLayer = ErayLayer.create();
this.addChild(erayLayer);
erayLayer.setJSDelegate({
    "onClick":function(value){
        cc.log("onClick:%s",value);
    }
});

// 写在JS顶层
var Config = Config || {};

Config.sendNumber = function(num)
{
    cc.log("From javascript: " + num);
};
</pre>

<p>运行点击场景上的图片，看打印输出</p>
<p>参考文件：<a href="https://github.com/coolexp/HelloCocosJS" target="_blank" rel="external">点击查看</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/08/11/NodeJS连接Redis/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/11/NodeJS连接Redis/" itemprop="url">
                  NodeJS连接Redis
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-11T16:49:47+08:00">
                2016-08-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Redis服务器"><a href="#Redis服务器" class="headerlink" title="Redis服务器"></a>Redis服务器</h2><ul>
<li>我们下载最新的redis进行编译(<a href="http://redis.io/" target="_blank" rel="external">http://redis.io/</a>)</li>
<li>我是在MacOSX上进行编译的，打开终端，切换到下载目录，运行tar命令进行解压</li>
<li>cd到redis目录，运行：make &amp;&amp; make install</li>
<li>启动Redis服务器,运行命令:redis-server redis.conf  （我修改了conf文件里的bind,默认是127.0.0.1，我修改成了一个内网地址，因为我将在Windows上编写NodeJs进行连接操作）</li>
</ul>
<h2 id="NodeJS"><a href="#NodeJS" class="headerlink" title="NodeJS"></a>NodeJS</h2><ul>
<li>下载安装NodeJs(<a href="http://nodejs.org" target="_blank" rel="external">http://nodejs.org</a>)</li>
<li>安装redis module,运行命令：npm install -g redis</li>
<li><p>在D盘目录创建文件夹：redis，新建NodeJS文件：test.js，内容如下：</p>
  <pre>
  // redis 链接
  var redis   = require('redis');
  var client  = redis.createClient('6379', '10.10.10.88');// 内网IP地址
  // redis 链接错误
  client.on("error", function(error) {
      console.log(error);
  });
  client.on("connect", runSample);
  function runSample() {
      // Set a value
      client.set("foo", "Hello World", function (err, reply) {
         console.log(reply.toString());
      });
      // Get a value
      client.get("foo", function (err, reply) {
          console.log(reply.toString());
          //client.quit();
      });
  }
  </pre>
</li>
<li><p>打开命令行，切换到D:\redis,运行命令：node test.js (可以会提示找不到redis module的错误，那先运行命令：node link redis)</p>
</li>
</ul>
<p>是不是在终端打印出现我们想要的信息了</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/07/28/基本的Git命令添加本地文件及代码到Github/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/28/基本的Git命令添加本地文件及代码到Github/" itemprop="url">
                  基本的Git命令添加本地文件及代码到Github
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-28T15:18:34+08:00">
                2016-07-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们有时候，需要将一些本地的代码，或者工具代码，添加到Github上进行备份。或者Share给其他的朋友，这里，我们就需要添加本地代码到github的repositories.这里我们分几个简单步骤来实现</p>
<p>1, 下载windows客户端，mac用户可以省略，自带了<a href="https://desktop.github.com/" target="_blank" rel="external">下载windows客户端</a>。</p>
<p>2, 参加之前的设置，生成本地本限的账户：<a href="http://nikoer.com/2016/06/06/Git%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE%E5%8F%8A%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/">Git的一些相关设置及操作命令</a></p>
<p>3, 登陆Github.com，创建一个新的repository.记住地址</p>
<p>4，如果本地以前没有Push过文件，参照如下的步骤</p>
<pre><code>* git init #初始化
* git add README.md #添加说明文件，如果本地有。可以省略。如果要添加所有文件，可以git add .
* git commit -m &quot;first commit&quot; #添加上传说明
* git remote add origin git@github.com:coolexp/CustomTools.git # 添加到远程关联你的res，换成对应的自己的git res
* git push -u origin master # 上传到远程

如果之前push过。可以省略第一步
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/07/20/Cocos2d-x-Console使用/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/20/Cocos2d-x-Console使用/" itemprop="url">
                  Cocos2d-x Console使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-20T15:50:30+08:00">
                2016-07-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>从cocos2d-x 3.0开始。cocos2d-x提供了一个不错的功能，Console，可以通过命令终端进行一些对游戏的调试，测试，控制，下面我们来看看具体怎么使用，</p>
<h2 id="新建项目"><a href="#新建项目" class="headerlink" title="新建项目"></a>新建项目</h2><ul>
<li>运行命令行 cocos new ConsoleTest -l cpp -d c:\cocos 的命令，创建一个空的项目，</li>
<li>修改AppDelegate.cpp的applicationDidFinishLaunching部分，在最后添加如下代码：<blockquote>
<p> Director::getInstance()-&gt;getConsole()-&gt;listenOnTCP(5678);</p>
</blockquote>
</li>
</ul>
<p>下面,我们来演示,从游戏内输出到电脑终端的功能,方便进行调试<br>在游戏需要的地方，在关闭按钮添加如下代码，去掉关闭功能，添加代码，Director::getInstance()-&gt;getConsole()-&gt;log(“Click Me\n”);我们可以认为，如果终端输出click me,说明游戏执行到此地方了，如果没有输出，就说明程序出bug了，进而进行代码的排错，调试</p>
<p>我这里运用的是mac系统，打开命令行，进行如下操作：</p>
<ul>
<li>连接游戏，命令行输入：nc localhost 5678</li>
<li>接着输入:debugmsg on</li>
<li>touch游戏中的关闭按钮，终端上是不是显示出来了？</li>
</ul>
<h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><p>当然我们可以，参加Console类，添加command,可以对游戏的一些控制功能，当然，最后调用cocos2d-x的类操作，建议通过Director::getInstance()-&gt;getScheduler()-&gt;performFunctionInCocosThread，送到GL线程进行执行。<br>当然，对应的手机调试，请把localhost换成对应的手机ip地址，确保手机跟电脑在同一个局域网内</p>
<p>Mac自带nc命令，windows用户下载：<a href="http://www.nikoer.com/data/nc.zip" target="_blank" rel="external">@下载nc</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/07/20/NodeJS-C-扩展入门-1/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/20/NodeJS-C-扩展入门-1/" itemprop="url">
                  NodeJS C++扩展入门(1)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-20T12:42:11+08:00">
                2016-07-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="环境的准备"><a href="#环境的准备" class="headerlink" title="环境的准备"></a>环境的准备</h2><ul>
<li>NodeJS本身的安装</li>
<li>NodeJS的c++扩展是借助node-gyp进行编译的，所以我们需要安装node-gyp,在命令行下输入：npm install node-gyp -g（可能需翻墙）</li>
</ul>
<h2 id="新建一个文件夹，作为我们的主目录，这里我们新建一个hello目录，"><a href="#新建一个文件夹，作为我们的主目录，这里我们新建一个hello目录，" class="headerlink" title="新建一个文件夹，作为我们的主目录，这里我们新建一个hello目录，"></a>新建一个文件夹，作为我们的主目录，这里我们新建一个hello目录，</h2><ul>
<li>编写binding.gyp文件，内容如下：  <pre>
      {
        'targets': [
          {
            'target_name': 'hello',
            'sources': [
                'src\hello.cc'
            ]
          }
        ]
      }
  </pre></li>
<li>编写cpp文件，我们取名叫hello.cc吧，内容如下：</li>
<li><pre>
  include <node.h>
  include <v8.h>
  using v8::FunctionCallbackInfo;
  using v8::Isolate;
  using v8::Local;
  using v8::Object;
  using v8::String;
  using v8::Value;
  void Method(const FunctionCallbackInfo<value>& args) {
      Isolate* isolate = args.GetIsolate();
      args.GetReturnValue().Set(String::NewFromUtf8(isolate, "Hello world"));
  }
  void init(Local<object> exports) {
      NODE_SET_METHOD(exports, "hello", Method);
  }
  NODE_MODULE(hello, init)
  </object></value></v8.h></node.h></pre>

</li>
</ul>
<h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>在Hello目录位置打开命令行：输入命令：node-gyp configure build,不出意外,一会显示ok字样</p>
<p>编写test.js进行测试：</p>
<p><pre><br>    const addon = require(‘./build/Release/hello.node’);<br>    console.log(addon.hello()); // ‘Hello world’<br></pre><br>在命令行输入:node test.js 打印出 ‘Hello world’</p>
<p>参考资料：<a href="https://nodejs.org/dist/latest-v4.x/docs/api/addons.html" target="_blank" rel="external">https://nodejs.org/dist/latest-v4.x/docs/api/addons.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Sloppy" />
          <p class="site-author-name" itemprop="name">Sloppy</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">50</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sloppy</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
