<!doctype html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="Sloppy's Blog">
<meta property="og:url" content="http://nikoer.com/page/2/index.html">
<meta property="og:site_name" content="Sloppy's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sloppy's Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://nikoer.com/page/2/"/>





  <title> Sloppy's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Sloppy's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            Über
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2017/01/05/IOS-IAP的一个注意点/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/05/IOS-IAP的一个注意点/" itemprop="url">
                  IOS IAP的一注意点
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-05T15:15:14+08:00">
                2017-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h3><p>最近公司的项目在AppleStore上审核通过了。由于之前接入了内购，在调试的时候。一点问题都没有。今天突然发现所有的IAP的商品一个沙盒测试账号只能购买一次。就不能购买第二次，并且直接卡在充值界面。由于重新打开APP会有恢复交易的功能，所以第二次充值虽然卡住，但是依然到账。但是这个问题，比较麻烦，由于测试阶段是好的。商品审核过了。这次测试以为是通过后的商品只能充值一次了。</p>
<h3 id="问题出在哪里"><a href="#问题出在哪里" class="headerlink" title="问题出在哪里"></a>问题出在哪里</h3><p>搜索了各种资料都没有找到答案，昨天拿了一下最新的版本代码。竟然是可以的。而旧版本的代码是不行的。查了老半天。原来是服务器返回的数据格式突然不对了，可能是合并代码时出问题了。造成的。因为每次的交易结束（finishTransaction）依据服务器返回的code为0状态的时候才结束。而新的代码是不管code为多少都会结束交易。而苹果的IAP，如果上个交易没有Finish，下个交易当前是不会触发交易完成或者失败的。所以一直以为是苹果不给游戏回调造成的。</p>
<h3 id="解决方案。"><a href="#解决方案。" class="headerlink" title="解决方案。"></a>解决方案。</h3><p>所以要注意的点是，每一次交易都要结束掉。不然不能连续充值。另外，同一个transactionReceipt,提交给服务器，让服务器去找IOS的充值进行校验都是可以通过的。可以服务器端，需要做标记。之前我们服务器端没有做标记，是否充值成功过，如果成功过。就不能再给游戏账户充值了。导致后来可以反复刷金币的BUG</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/12/30/Cocos2d-x文件的压缩/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/30/Cocos2d-x文件的压缩/" itemprop="url">
                  Cocos2d-x文件的压缩
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-30T15:35:29+08:00">
                2016-12-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>公司最近的游戏上了AppleStore，打开游戏的详细页面。策划突然发现游戏好大啊。怎么显示的是347M，之前上的另外一款游戏，我们没有注意这块，只是光顾着玩了。而实际我们做出来的IPA只有140多M，咨询几个超级资深的IOS开发人员，AppleStore显示的是IPA展开后的大小。但是玩家不这么认为啊。以为下载的游戏这么大。为了减小大小，看来只要压缩原始文件大小了，经过分析，特做出以下的方法：</p>
<ul>
<li>图片文件，声音文件，不压缩，因为压缩比几乎没有。</li>
<li>压缩相关的文本文件，Plist，Json文件。尤其是动画文件，我们用的是ExportJson格式。大的惊人</li>
</ul>
<p>在这里，做了一下简单的文件格式定义，文件由三部分构成，如下</p>
<ul>
<li>在每个压缩的文件头部加eraygames做压缩标记（9字节长），（用来判断文件是否压缩）</li>
<li>然后是四个字节描述压缩前的文件原始长度 （用来解压）</li>
<li>然后是文件压缩后的内容</li>
</ul>
<p>资源的压缩，可以用Python脚本语言，在项目打包之前做运行一下命令即可，下面主要修改Cocos2d-x的引擎部分CCFileUtils,因为所有的文件加载全部在这个类里。而最终的入口在FileUtils::getContents方法里。当然其他平台，在对应的CCFileUtils-Android,CCFileUtils-win32,里。修改如下，在CCFileUtils.h头文件添加方法如下：</p>
<pre>
protected:
    enum COMPRESS_CODE
    {
        noCompress = 0,
        unCompressOK,
        unCompressError,
    };
    COMPRESS_CODE checkIsCompressFile(ResizableBuffer* buffer,int size);
private:
    int m_ITagLen;
    int m_ISizeLen;
</pre>
CCFileUtils.cpp如下：
<pre>
FileUtils::COMPRESS_CODE FileUtils::checkIsCompressFile(ResizableBuffer* buffer, int size) {
    if (size <= m_itaglen="" +="" m_isizelen)="" {="" return="" nocompress;="" }="" unsigned="" char="" *="" sdata="new" char[m_itaglen="" 1];="" memcpy(sdata,="" buffer-="">buffer(), m_ITagLen);
    sData[m_ITagLen] = '\0';
    std::string tag((char*)sData);
    if (tag.find("eraygames") != std::string::npos) {
        CC_SAFE_DELETE_ARRAY(sData);
        sData = new unsigned char[m_ISizeLen];
        memcpy(sData, (unsigned char*)buffer->buffer() + m_ITagLen, m_ISizeLen);
        std::reverse(&sData[0], &sData[m_ISizeLen]);
        uLong fileLen = 0;
        memcpy(&fileLen, sData, m_ISizeLen);
        CC_SAFE_DELETE_ARRAY(sData);
        int compressSize = size - m_ITagLen - m_ISizeLen;
        sData = new unsigned char[compressSize];
        memcpy(sData, (unsigned char*)buffer->buffer() + m_ITagLen + m_ISizeLen, compressSize);
        unsigned char* fileData = new unsigned char[fileLen];
        bool isCompress = true;
        do
        {
            if (uncompress(fileData, &fileLen, sData, compressSize) != Z_OK) {
                isCompress = false;
                break;
            }
            buffer->setBuffer(fileData, fileLen);
        } while (0);
        CC_SAFE_DELETE_ARRAY(sData);
        CC_SAFE_DELETE_ARRAY(fileData);
        if (!isCompress) {
            CCLOG("UnCompress Error");
            return unCompressError;
        }
        return unCompressOK;
    }
    return noCompress;
}
</=></pre>

<p>然后修改对应的getContents方法。在方法最后一句的前面添加,我修改CCFileUtils-win32.cpp</p>
<pre>
FileUtils::Status FileUtilsWin32::getContents(const std::string& filename, ResizableBuffer* buffer)
{
      // 此处省略其他代码
    if (!successed) {
        CCLOG("Get data from file(%s) failed, error code is %s", filename.data(), std::to_string(::GetLastError()).data());
        buffer->resize(sizeRead);
        return FileUtils::Status::ReadFailed;
    }
    FileUtils::COMPRESS_CODE code = checkIsCompressFile(buffer, size);
    if (code == FileUtils::COMPRESS_CODE::unCompressError) {
        return FileUtils::Status::ReadFailed;
    }
    return FileUtils::Status::OK;
}
</pre>

<p>最近项目升级引擎到3.13.1，以上所有的研究代码基于此版本</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/12/02/Android-BLE作为外设的实例/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/02/Android-BLE作为外设的实例/" itemprop="url">
                  Android BLE作为外设的实例
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-02T17:03:09+08:00">
                2016-12-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前的代码研究，Android主要是做为中央设备存在的，而且官方的例子好象也是基于Central的，抽一个时间研究了一下作为Peripheral的情况下，是如何编写代码的，Google查找了一番，发现作为Peripheral相对更简单多了，只是做个简单的广播，下面就几个点说一下，</p>
<ul>
<li>权限设置同之前的一样，不变，</li>
<li>用之前IOS或者Android写的Central进行连接，我用的是IOS，Android没有测试，我相信应该是可以的，</li>
</ul>
<p>这里面主要是一个MockServerCallBack的逻辑处理，可以参考后面的代码参考，主要的Activity的代码，参考如下：</p>
<pre>
private void initBroadCast(){
    final BluetoothManager bluetoothManager = (BluetoothManager) getSystemService(Context.BLUETOOTH_SERVICE);
    mBluetoothAdapter = bluetoothManager.getAdapter();
    if(!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH_LE)){
         Toast.makeText(this, R.string.ble_not_supported, Toast.LENGTH_SHORT).show();
    }
    //打开蓝牙的套路
    if ((mBluetoothAdapter == null) || (!mBluetoothAdapter.isEnabled())) {
        Toast.makeText(this, R.string.unknown_service, Toast.LENGTH_SHORT).show();
        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        this.startActivityForResult(enableBtIntent,0);
    }
    if (mBluetoothAdvertiser == null) {
        mBluetoothAdvertiser = mBluetoothAdapter.getBluetoothLeAdvertiser();
    }
    mMockServerCallBack = new MockServerCallBack();
    mGattServer = bluetoothManager.openGattServer(this, mMockServerCallBack);
    try {
        mMockServerCallBack.setupServices(mGattServer);
        mBluetoothAdvertiser.startAdvertising(createAdvSettings(true, 0), createFMPAdvertiseData(),mAdvCallback);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static AdvertiseSettings createAdvSettings(boolean connectable, int timeoutMillis) {
    AdvertiseSettings.Builder builder = new AdvertiseSettings.Builder();
    //设置广播的模式,应该是跟功耗相关
    builder.setAdvertiseMode(AdvertiseSettings.ADVERTISE_MODE_BALANCED);
    builder.setConnectable(connectable);
    builder.setTimeout(timeoutMillis);
    builder.setTxPowerLevel(AdvertiseSettings.ADVERTISE_TX_POWER_HIGH);
    return builder.build();
}

//设置一下FMP广播数据
public static AdvertiseData createFMPAdvertiseData() {
    AdvertiseData.Builder builder = new AdvertiseData.Builder();
    builder.setIncludeDeviceName(true);
    AdvertiseData adv = builder.build();
    return adv;
}

//发送广播的回调，onStartSuccess/onStartFailure很明显的两个Callback
private AdvertiseCallback mAdvCallback = new AdvertiseCallback() {
    public void onStartSuccess(android.bluetooth.le.AdvertiseSettings settingsInEffect) {
        if (settingsInEffect != null) {
            Log.d(TAG, "onStartSuccess TxPowerLv="+ settingsInEffect.getTxPowerLevel()+ " mode=" + settingsInEffect.getMode()+ " timeout=" + settingsInEffect.getTimeout());
        } else {
            Log.d(TAG, "onStartSuccess, settingInEffect is null");
        }
    }

    public void onStartFailure(int errorCode) {
        Log.d(TAG, "onStartFailure errorCode=" + errorCode);
    };
};
</pre>


<p>具体的源码下载：<a href="http://www.nikoer.com/data/HelloBlueTooth.zip" target="_blank" rel="external">代码查看下载</a></p>
<p>入口Activity：BLEPeripheral</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/12/02/蓝牙BLE模式下，IOS与Android系统的配对与通信/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/02/蓝牙BLE模式下，IOS与Android系统的配对与通信/" itemprop="url">
                  蓝牙BLE模式下，IOS与Android系统的配对与通信
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-02T14:50:32+08:00">
                2016-12-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前一文章里，研究了，Android,IOS各自的蓝牙实现方式，今天花了点时间研究蓝牙4.0，BLE协议下，Android与IOS两系统开发的APP实现用蓝牙的通信，</p>
<ul>
<li>IOS 6.0+</li>
<li>Android 5.0+</li>
</ul>
<p>我们这里把IOS做为外设，Android做为中央设备，IOS作为外设的代码，请参考上篇教程的源码，一模一样。这篇记录着重关系Android BLE的开发，下面是准备工作：</p>
<h4 id="添加AndroidManifest-xml中的权限"><a href="#添加AndroidManifest-xml中的权限" class="headerlink" title="添加AndroidManifest.xml中的权限"></a>添加AndroidManifest.xml中的权限</h4><p>记得要加uses-feature，参考源代码中的配置文件</p>
<h4 id="添加一个Service负责蓝牙的通信"><a href="#添加一个Service负责蓝牙的通信" class="headerlink" title="添加一个Service负责蓝牙的通信"></a>添加一个Service负责蓝牙的通信</h4><p>这里我就不给出代码了，请自行从参考网站中，下载，我只增加了一个写内容的方法</p>
<p><pre><br> public boolean writeValueData(BluetoothGattCharacteristic characteristic, byte[] data) {<br>    boolean ret = false;</pre></p>
<pre><code>if (data == null) {
    return false;
}
int length = data.length;
if (length &lt;= dataBufferSize) {
    characteristic.setValue(data);
    ret = mBluetoothGatt.writeCharacteristic(characteristic);
} else {
    int count = 0;
    int offset = 0;
    while (offset &lt; length) {

        if ((length - offset) &lt; dataBufferSize) {
            count = length - offset;
        } else {
            count = dataBufferSize;
        }
        byte tempArray[] = new byte[count];
        System.arraycopy(data, offset, tempArray, 0, count);

        characteristic.setValue(data);
        ret = mBluetoothGatt.writeCharacteristic(characteristic);

        if (!ret) {
            return ret;
        }

        offset = offset + count;
    }
}
return ret;
</code></pre><p>}<br></p>
<h3 id="修改直接相联蓝牙"><a href="#修改直接相联蓝牙" class="headerlink" title="修改直接相联蓝牙"></a>修改直接相联蓝牙</h3><p>教程中，各种数据，各种UI，我简化了。在拿到Service后直接相关，修改了其中的方法，代码如下：</p>
<p><pre><br> private void displayGattServices(List<bluetoothgattservice> gattServices) {<br>    if (gattServices == null) return;<br>    // Loops through available GATT Services.<br>    for (BluetoothGattService gattService : gattServices) {<br>        String uuid  = gattService.getUuid().toString();<br>        if(BluetoothLeService.UUID_HEART_RATE_MEASUREMENT.equals(gattService.getUuid())){<br>            Log.d(“gattService”, uuid);<br>            if(BluetoothGattCharacteristic.PROPERTY_READ&gt;0){<br>                List<bluetoothgattcharacteristic> gattCharacteristics =gattService.getCharacteristics();<br>                for (BluetoothGattCharacteristic gattCharacteristic : gattCharacteristics) {<br>                    String charUDID = gattCharacteristic.getUuid().toString();<br>                    if(charUDID.equalsIgnoreCase(SampleGattAttributes.CLIENT_CHARACTERISTIC_CONFIG)){<br>                        Log.d(“charUDID”, charUDID);<br>                        for(BluetoothGattDescriptor  descriptor:gattCharacteristic.getDescriptors()){<br>                            String desUDID = descriptor.getUuid().toString();<br>                            Log.d(“desUDID”, desUDID);<br>                        }<br>                        mCharacteristic = gattCharacteristic;<br>                        mBluetoothLeService.setCharacteristicNotification(gattCharacteristic, true);<br>                    }<br>                }<br>            }<br>        }<br>    }<br>}<br></bluetoothgattcharacteristic></bluetoothgattservice></pre><br>这里有个小问题。还没有弄明白，为什么，IOS跟Android的Descriptor的UDID不一样吗？我重新定义了下，相关的UDID，参考：SampleGattAttributes.</p>
<p>PS:在发送数据时，记得在IOS端输入Android端提示的Code，蓝牙连接密码</p>
<p>相关源码在：<a href="http://www.nikoer.com/data/HelloBlueTooth.zip" target="_blank" rel="external">代码查看下载</a></p>
<p>入口为： BLEActivity</p>
<p>参考：<a href="https://developer.android.com/guide/topics/connectivity/bluetooth-le.html" target="_blank" rel="external">https://developer.android.com/guide/topics/connectivity/bluetooth-le.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/12/01/蓝牙技术的初步探究/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/01/蓝牙技术的初步探究/" itemprop="url">
                  蓝牙技术的初步探究
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-01T17:01:42+08:00">
                2016-12-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前两天，BOSS问我Cocos2d-x适合开发APP吗。我说不太适合。当然跨平台的APP开发框架也有很多种，聊下来之后，发现UI的表现只是其次，主要是可能需要涉及到手机通过蓝牙技术，控制设备啊，之类的。象目前的车载设备，穿载设备(智能手环)，跟手机之间的通信，目前基本上都是在蓝牙通信基础之上（当然很多车载设备，智能设备也装有网卡，不过好象目前不是主流）。经过两天的研究，弄明白了一些概念，</p>
<h3 id="经典蓝牙"><a href="#经典蓝牙" class="headerlink" title="经典蓝牙"></a>经典蓝牙</h3><p>也就是蓝牙4.0之前,俗称经典蓝牙阶段</p>
<h3 id="蓝牙4-0"><a href="#蓝牙4-0" class="headerlink" title="蓝牙4.0"></a>蓝牙4.0</h3><p>这里面有一个重要的概念叫低功耗蓝牙(Bluetooth Low Energ),这种架构的芯片,有单模跟双模,双模即可以跟4.0阶段的蓝牙进行通信,也可以跟经典的蓝牙阶段进行通信.</p>
<blockquote>
<blockquote>
<p>在经典蓝牙阶段，IOS是拒绝不信任的设备接入的，这也就是，很多的Android设备的蓝牙不能跟IOS设备进行通信了。那Android跟IOS设备如果要通信怎么办，幸好，IOS6.0+支持BLE，Android5.0+也支持BLE的开发了，那两者如果要通信，每个系统的设备的应用，可以在这基础上进行开发通信了。</p>
</blockquote>
</blockquote>
<p>下面是这两天做的简单研究，代码部分，借鉴了网上很多朋友的，我在这里做一下规整与调试，并排除了代码中的一些错误：</p>
<p>IOS BLE协议下的代码例子：<a href="http://www.nikoer.com/data/IOSBlueTooth.zip" target="_blank" rel="external">代码查看下载</a></p>
<p>Android蓝牙经典阶段的代码例子：<a href="http://www.nikoer.com/data/HelloBlueTooth.zip" target="_blank" rel="external">代码查看下载</a></p>
<p>接下来，我花点时间研究下，Android BLE协议下的蓝牙开发，并实现与IOS的通信。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/11/23/NDK编译出现make-文件名过长-的解决方案/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/23/NDK编译出现make-文件名过长-的解决方案/" itemprop="url">
                  NDK编译出现make(**文件名过长)的解决方案
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-11-23T10:09:00+08:00">
                2016-11-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>随着项目文件的变多，最近在Windows上编译Android版本的时候，会出现make(**206,文件名过长的问题)，google了一下，发现Windows的命令行的限制，以下是摘自Android开发网站的解释(<a href="https://developer.android.com/ndk/guides/android_mk.html" target="_blank" rel="external">https://developer.android.com/ndk/guides/android_mk.html</a>)</p>
<blockquote>
<p>This feature can be useful on Windows, where the command line accepts a maximum of only of 8191 characters, which can be too small for complex projects. It also impacts the compilation of individual source files, placing nearly all compiler flags inside list files, too.</p>
</blockquote>
<p>两种解决方案：</p>
<ul>
<li>一种是在Android.mk文件中，添加编译设置：LOCAL_SHORT_COMMANDS := true</li>
<li>二种是在Application.mk文件中：APP_SHORT_COMMANDS:=true</li>
</ul>
<p>第二种，可能会造成全部的编译慢一些</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/10/25/设备唯一标识及GUID的总结/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/25/设备唯一标识及GUID的总结/" itemprop="url">
                  设备唯一标识及GUID的总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-25T16:17:58+08:00">
                2016-10-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="DeviceID"><a href="#DeviceID" class="headerlink" title="DeviceID"></a>DeviceID</h2><p>在很多应用中，经常需要用到。获取设备的唯一标识。而且是不能变化的，一旦用户删除APP，重新安装时，下次获取的跟上次获取的UDID是一样的，以前在苹果上，很容易实现，不过现在的IOS有各种限制。</p>
<h3 id="IOS解决方法："><a href="#IOS解决方法：" class="headerlink" title="IOS解决方法："></a>IOS解决方法：</h3><p><a href="https://github.com/ylechelle/OpenUDID" target="_blank" rel="external">OpenUDID</a></p>
<h3 id="Android解决方法："><a href="#Android解决方法：" class="headerlink" title="Android解决方法："></a>Android解决方法：</h3><p><a href="https://github.com/vieux/OpenUDID" target="_blank" rel="external">查看</a></p>
<h2 id="GUID"><a href="#GUID" class="headerlink" title="GUID"></a>GUID</h2><p>当然，还有好多应用，需要生成种唯一标识符，这里也提供一下参考：<a href="https://github.com/graeme-hill/crossguid" target="_blank" rel="external">crossguid</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/10/24/IOS自带的md5-sha1/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/24/IOS自带的md5-sha1/" itemprop="url">
                  IOS自带的md5,sha1
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-24T16:40:57+08:00">
                2016-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>相信很多在做校验的相关功能中，会用到md5,跟sha1的相关字符串校验，IOS中自带此功能，具体代码如下：</p>
<pre>
#include "CommonCrypto/CommonDigest.h"// 双引号替换成<>
static inline char hexChar(unsigned char c) {
    return c < 10 ? '0' + c : 'a' + c - 10;
}

static inline void hexString(unsigned char *from, char *to, NSUInteger length) {
    for (NSUInteger i = 0; i < length; ++i) {
        unsigned char c = from[i];
        unsigned char cHigh = c >> 4;
        unsigned char cLow = c & 0xf;
        to[2 * i] = hexChar(cHigh);
        to[2 * i + 1] = hexChar(cLow);
    }
    to[2 * length] = '\0';
}

NSString * md5(const char *string) {
    static const NSUInteger LENGTH = 16;
    unsigned char result[LENGTH];
    CC_MD5(string, (CC_LONG)strlen(string), result);

    char hexResult[2 * LENGTH + 1];
    hexString(result, hexResult, LENGTH);

    return [NSString stringWithUTF8String:hexResult];
}

NSLog(@"%@", md5("test"));

NSString * sha1(const char *string) {
    static const NSUInteger LENGTH = 20;
    unsigned char result[LENGTH];
    CC_SHA1(string, (CC_LONG)strlen(string), result);

    char hexResult[2 * LENGTH + 1];
    hexString(result, hexResult, LENGTH);

    return [NSString stringWithUTF8String:hexResult];
}

NSLog(@"%@", sha1("test"));
</pre>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/10/18/IOS推送证书的不同语言的制作方法/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/18/IOS推送证书的不同语言的制作方法/" itemprop="url">
                  IOS推送证书的不同语言的制作方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-18T09:40:00+08:00">
                2016-10-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="PHP"><a href="#PHP" class="headerlink" title="PHP"></a>PHP</h3><p>导出私钥：</p>
<p>developer下载aps_development.cer</p>
<p>钥匙串 -&gt; Keys -&gt; 右边的私钥</p>
<p>1, openssl x509 -in aps_development.cer -inform der -out ErayOFFRemotionNotification.pem  </p>
<p>2，openssl pkcs12 -nocerts -out ErayOFFRemotionNotificationKey.pem -in Certificates.p12</p>
<p>3，cat ErayOFFRemotionNotification.pem ErayOFFRemotionNotificationKey.pem  &gt; ErayOFFNotification.pem</p>
<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><p>钥匙串 -&gt; My Certificates 导出对应的Push证书 P12</p>
<h3 id="NodeJS"><a href="#NodeJS" class="headerlink" title="NodeJS"></a>NodeJS</h3><p>钥匙串 -&gt; My Certificates 导出对应的Push证书 cer格式</p>
<p>钥匙串 -&gt; My Certificates 展开私钥 导出对应的Push证书 p12格式</p>
<p>1，openssl x509 -in cert.cer -inform DER -outform PEM -out cert.pem</p>
<p>2，openssl pkcs12 -in key.p12 -out key.pem -nodes</p>
<p>密码都输入：123456</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://nikoer.com/2016/10/17/NodeJS实现IOS中的APNS/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Sloppy">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/avatar.gif">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Sloppy's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Sloppy's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/17/NodeJS实现IOS中的APNS/" itemprop="url">
                  NodeJS实现IOS中的APNS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-17T13:48:55+08:00">
                2016-10-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="生成证书"><a href="#生成证书" class="headerlink" title="生成证书"></a>生成证书</h2><h3 id="导出"><a href="#导出" class="headerlink" title="导出"></a>导出</h3><p>打开钥匙串：<br>    钥匙串 -&gt; My Certificates 导出对应的Push证书 （cer格式）<br>    钥匙串 -&gt; My Certificates 展开私钥 导出对应的证书<br>密码输入：123456</p>
<h3 id="生成PEM"><a href="#生成PEM" class="headerlink" title="生成PEM"></a>生成PEM</h3><p>Push证书 p12格式<br>终端输入<br>1，openssl x509 -in cert.cer -inform DER -outform PEM -out cert.pem<br>2，openssl pkcs12 -in key.p12 -out key.pem -nodes</p>
<h2 id="NodeJS代码"><a href="#NodeJS代码" class="headerlink" title="NodeJS代码"></a>NodeJS代码</h2><h3 id="安装apn"><a href="#安装apn" class="headerlink" title="安装apn"></a>安装apn</h3><p>npm install apn</p>
<h3 id="编写代码："><a href="#编写代码：" class="headerlink" title="编写代码："></a>编写代码：</h3><p>IOS注册省略</p>
<pre>
var apn = require("apn");

var tokens = ["e73447af823400987c05f31a2b5a0960a729ceaea9d772869f0f22eb463bea8c"];

var service = new apn.Provider({
  "cert": "push/cert.pem",
  "key": "push/key.pem",
  "passphrase":"123456",
  "production":false
});

var note = new apn.Notification({
  "alert":"末世战纪欢迎您的到来",
  "sound":"default"
});

// The topic is usually the bundle identifier of your application.
note.topic = "com.eray.off";
note.badge = 1;

console.log(`Sending: ${note.compile()} to ${tokens}`);
service.send(note, tokens).then( result => {
    console.log("sent:", result.sent.length);
    console.log("failed:", result.failed.length);
    console.log(result.failed);
});

// For one-shot notification tasks you may wish to shutdown the connection
// after everything is sent, but only call shutdown if you need your 
// application to terminate.
service.shutdown();
</pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Sloppy" />
          <p class="site-author-name" itemprop="name">Sloppy</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">52</span>
                <span class="site-state-item-name">Artikel</span>
              </a>
            </div>
          

          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">Tags</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Sloppy</span>
</div>


<div class="powered-by">
  Erstellt mit  <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
